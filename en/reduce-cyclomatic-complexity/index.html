<!DOCTYPE html>
<html lang="en-US">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>How To Reduce Cyclomatic Complexity: A Complete Guide</title>
  <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Editorial note: I originally wrote this post for the LinearB blog.  You can check out the original here, at their site. While you’re there, take a look at th...">
  
  <!-- Twitter card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@carlosschults">
  <meta name="twitter:site" content="@carlosschults">
  <meta name="twitter:domain" content="carlosschults.net">
  <meta name="twitter:title" content="How To Reduce Cyclomatic Complexity: A Complete Guide">
  <meta name="twitter:description" content="Editorial note: I originally wrote this post for the LinearB blog.  You can check out the original here, at their site. While you’re there, take a look at th...">

   <!-- Facebook meta -->
  
  
  <meta property="og:title" content="How To Reduce Cyclomatic Complexity: A Complete Guide">
  <meta property="og:site_name" content="Carlos Schults / Blog" />
  <meta property="og:locale" content="en_US">  
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://res.cloudinary.com/dz5ppacuo/image/upload/v1617641333/reduce-cyclomatic-complexity/reduce-cyclomatic-complexity-1038x437.jpg" />  
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="1038"> 
  <meta property="og:image:height" content="437">  
  
  <meta property="og:article:published_time" content="2021-04-05T00:00:00-03:00" />  
  <meta property="og:article:author" content="Carlos Schults" />
  
  <meta property="og:article:tag" content="best-practices" />
  <meta property="og:article:tag" content="software-testing" />
  <meta property="og:article:tag" content="automated-testing" />
  <meta property="og:article:tag" content="unit-testing" />
  <meta property="og:article:tag" content="software-engineering" />    
  
  <meta property="og:url" content="https://carlosschults.net/en/reduce-cyclomatic-complexity/"/>
  <meta property="og:description" content="Editorial note: I originally wrote this post for the LinearB blog.  You can check out the original here, at their site. While you’re there, take a look at th...">
  <link rel="stylesheet" href="/css/main.css">  
  
  <link rel="canonical" href="https://linearb.io/blog/reduce-cyclomatic-complexity/">
   
  
  <link rel="alternate" hreflang="en" href="/en/reduce-cyclomatic-complexity/" />
  <link rel="alternate" hreflang="pt" href="/pt/reduzir-complexidade-ciclomatica/" />
  
  <link rel="alternate" type="application/rss+xml" title="carlos schults / blog" href="https://carlosschults.net/feed.xml">
</head>

  <body>
    <header class="site-header">
  <div class="wrapper">    
    <a class="site-title" href="/">carlos schults / blog</a>
    
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">        
          
          <a class="page-link" href="/about/">About</a>
		  <a class="page-link" href="/my-work/">My Work</a>
		  <a class="page-link" href="/search/">Search</a>
                  
      </div>
    </nav>

  </div>

</header>

<div class="wrapper" style="text-align: right; line-height: 2em">
  
   <a href="/en/reduce-cyclomatic-complexity/" class="en">en</a>  <a href="/pt/reduzir-complexidade-ciclomatica/" class="pt">pt</a> 

  
  
</div>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">    
    <h2 class="postTitle" itemprop="headline">How To Reduce Cyclomatic Complexity: A Complete Guide</h2>
    <p class="post-meta">   
    <time datetime="2021-04-05T00:00:00-03:00" itemprop="datePublished">Apr 5, 2021
    </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Carlos Schults</span></span>
  <span class="tags" itemprop="keywords"> • Tags: <a href="/tag/best-practices">best-practices </a> <a href="/tag/software-testing">software-testing </a> <a href="/tag/automated-testing">automated-testing </a> <a href="/tag/unit-testing">unit-testing </a> <a href="/tag/software-engineering">software-engineering </a> </span>
  </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><img src="https://res.cloudinary.com/dz5ppacuo/image/upload/v1617641333/reduce-cyclomatic-complexity/reduce-cyclomatic-complexity-1038x437.jpg" alt="" /></p>

<p><em>Editorial note: I originally wrote this post for the LinearB blog.  You can <a href="https://linearb.io/blog/reduce-cyclomatic-complexity/">check out the original here, at their site</a>. While you’re there, take a look at their product, a software intelligence solution that uses Git and project statistics to help dev teams improve their productivity.</em></p>

<p>Software engineers worth their salt are always searching for ways to improve their code. Fortunately for them, there’s a reliable way to evaluate the health of a codebase and project, and that’s through the use of <a href="https://linearb.io/metrics-modern-dev-leaders/">metrics</a>. Today’s post is all about a specific metric. You’ll learn how to reduce cyclomatic complexity and, more importantly, why you would want to do it.</p>

<p>We’ll start by defining cyclomatic complexity. After that, you’ll learn what the problem with having a high cyclomatic complexity value is and why you would need to reduce it. After the “what” and “why,” we’ll finally get to the “how”: We’ll show you tactics you can adopt to reduce the cyclomatic complexity of your code. Let’s get to it.</p>

<h2 id="cyclomatic-complexity-a-brief-definition">Cyclomatic Complexity: A Brief Definition</h2>

<p>Cyclomatic complexity is an important software metric. It refers to the number of possible execution paths inside a given piece of code—for instance, a function. The more decision structures you use, the more possible branches there are for your code.</p>

<p>Cyclomatic complexity is especially important when it comes to testing. By calculating the cyclomatic complexity of a function, for instance, you know the minimum number of test cases you’ll need to achieve full <a href="https://linearb.io/blog/what-is-branch-coverage/">branch coverage</a> of that function. So, we can say that cyclomatic complexity can be a predictor of how hard it is to test a given piece of code.</p>

<h2 id="a-dead-simple-cyclomatic-complexity-example">A Dead Simple Cyclomatic Complexity Example</h2>

<p>Consider the following function written in pseudocode:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">void</span> <span class="nf">sayHello</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Hello, ${name}!"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Since it has a single statement, it’s easy to see its cyclomatic complexity is 1. Now, let’s change things a little bit:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">void</span> <span class="nf">sayHello</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">sayGoodbye</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Hello, ${name}!"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sayGoodbye</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Goodbye, ${name}!"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The second version of the function has a branch in it. The caller to the function might pass <strong>true</strong> as the value for the <strong>sayGoodbye</strong> parameter, even though the default value is <strong>false</strong>. If that does happen, the function will print a goodbye message after saying hello. On the other hand, if the caller doesn’t supply a value for the parameter or chooses <strong>false</strong>, the goodbye message won’t be displayed.</p>

<p>So, the function has two possible execution branches, which is the same as saying that its cyclomatic complexity has a value of 2.</p>

<h2 id="why-is-cyclomatic-complexity-bad">Why Is Cyclomatic Complexity Bad?</h2>

<p>Cyclomatic complexity isn’t intrinsically bad. For instance, you can have a piece of code with a somewhat high cyclomatic complex value that’s super easy to read and understand. However, generally speaking, we can say that having a high cyclomatic complexity is either a symptom of problems with the codebase or a potential cause of future problems. Let’s cover some of the reasons why you’d want to reduce it in more detail.</p>

<h3 id="cyclomatic-complexity-might-contribute-to-cognitive-complexity">Cyclomatic Complexity Might Contribute to Cognitive Complexity</h3>

<p>Cognitive complexity refers to how difficult it is to understand a given piece of code. Though that’s not always the case, cyclomatic complexity can be one of the factors driving up cognitive complexity. The higher the cognitive complexity of a piece of code, the harder it is to navigate and maintain.</p>

<h3 id="cyclomatic-complexity-makes-code-harder-to-test">Cyclomatic Complexity Makes Code Harder to Test</h3>

<p>As we’ve already mentioned, higher values of cyclomatic complexity result in the need for a higher number of test cases to comprehensively test a block of code—e.g., a function. So, if you want to make your life easier when writing tests, you probably want to reduce the cyclomatic complexity of your code.</p>

<h3 id="cyclomatic-complexity-contributes-to-higher-risk-of-defects">Cyclomatic Complexity Contributes to Higher Risk of Defects</h3>

<p>You’re likelier to introduce defects to an area of the codebase that you change a lot than to one you rarely touch. In addition, the more complex a given piece of code is, the more likely you are to misunderstand it and introduce a defect to it.</p>

<p>So, complex code that suffers a lot of <a href="https://linearb.io/blog/what-is-code-churn/">churn</a>—frequent changes by the team—represents more risk of defects. By reducing the cyclomatic complexity—and, ideally, the code churn as well—you’ll be mitigating those risks.</p>

<h2 id="how-to-reduce-cyclomatic-complexity-6-practical-ways">How to Reduce Cyclomatic Complexity: 6 Practical Ways</h2>

<p>We’ll now go over a few practical tips you can use to ensure the cyclomatic complexity of your code is as low as possible.</p>

<h3 id="1prefer-smaller-functions">1.Prefer Smaller Functions</h3>

<h4 id="what-to-do">What to Do?</h4>

<p>All else being equal, smaller functions are easier to read and understand. They’re also less likely to contain bugs by virtue of their length. If you don’t have a lot of code, you don’t have lots of opportunities for buggy code. The same reasoning applies for cyclomatic complexity: You’re less likely to have complex code if you have less code period. So, the advice here is to prefer smaller functions.</p>

<h4 id="how-to-do-it">How to Do It?</h4>

<p>For each function, identify their core responsibility. Extract what’s left to their own functions and modules. Doing that also makes it easier to reuse code, which is a point we’ll revisit soon.</p>

<h3 id="2avoid-flag-arguments-in-functions">2.Avoid Flag Arguments in Functions</h3>

<h4 id="what-to-do-1">What to Do?</h4>

<p>Flag arguments are boolean parameters you add to a function. People usually use them when they need to change how a function works while at the same time preserving the old behavior.</p>

<h4 id="how-to-do-it-1">How to Do It?</h4>

<p>What to use instead of flag parameters? In a nutshell, you can use strategies that accomplish the same result without incurring high complexity. For instance, you could create a new function, maintaining the old one as it is and extracting the common parts into its own private function.</p>

<p>If the flag parameter is being used to enhance or improve the behavior of the original function somehow, you might want to leverage the <a href="https://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> to reach the same end.</p>

<h3 id="3reduce-the-number-of-decision-structures">3.Reduce the Number of Decision Structures</h3>

<h4 id="what-to-do-2">What to Do?</h4>

<p>You might consider this one a no-brainer. If the decision structures—especially <strong>if-else</strong> and switch case—are what cause more branches in the code, it stands to reason that you should reduce them if you want to keep cyclomatic complexity at bay.</p>

<h4 id="how-to-do-it-2">How to Do It?</h4>

<p>Some of the tactics we’ve just seen can contribute to reducing the number of <strong>if</strong> statements in your code. For instance, instead of using flag arguments and then using an <strong>if</strong> statement to check, you can use the decorator pattern. Instead of using a switch case to go over many possibilities and decide which one the code will execute, you can leverage the <a href="https://en.wikipedia.org/wiki/Strategy_pattern">strategy pattern</a>. Sure, at some point in the code, you’ll still need a switch case. After all, <em>someone</em> has to decide which actual implementation to use. However, that point becomes the only point in the code that needs that decision structure.</p>

<h3 id="4get-rid-of-duplicated-code">4.Get Rid of Duplicated Code</h3>

<h4 id="what-to-do-3">What to Do?</h4>

<p>Sometimes, you have functions/methods that do almost the same thing. Keeping both increases the total cyclomatic complexity of your class or module. If you can limit your duplicates, you can limit complexity.</p>

<h4 id="how-to-do-it-3">How to Do It?</h4>

<p>Remove duplicated code by:</p>

<ul>
  <li>extracting the common bits of code to their own dedicated methods/functions.</li>
  <li>leveraging design patterns—such as <a href="https://en.wikipedia.org/wiki/Template_method_pattern">template pattern</a>—that encourage code reuse.</li>
  <li>extracting generic utility functions into packages—gems, npm modules, NuGet packages, etc.—that can be reused through the whole organization.</li>
</ul>

<h3 id="5remove-obsolete-code">5.Remove Obsolete Code</h3>

<h4 id="what-to-do-4">What to Do?</h4>

<p>There are many reasons why it’s a good idea to remove obsolete—i.e., dead—code from your application. For our context, it suffices to say that that’s a “free” way to bring code coverage up and cyclomatic complexity down.</p>

<h4 id="how-to-do-it-4">How to Do It?</h4>

<p>Just use a tool that lets you identify dead code—even your IDE might be able to do it—and then delete it mercilessly.</p>

<h3 id="6dont-reinvent-the-wheel">6.Don’t Reinvent the Wheel</h3>

<h4 id="what-to-do-5">What to Do?</h4>

<p>Let the developer who never wrote a function—or even a couple of them—to perform date formatting cast the first stone! It’s almost like a rite of passage.</p>

<p>Writing code that simply duplicates functionality that your language’s standard library or your framework already provides is a sure way to increase complexity unnecessarily. If <a href="https://wiki.c2.com/?SoftwareAsLiability">code is a liability</a>, you want to write only the strictly necessary amount of it.</p>

<h4 id="how-to-do-it-5">How to Do It?</h4>

<p>Implement a sound code review strategy that’s able to identify and get rid of such wheel reinventions.</p>

<h2 id="reduce-cyclomatic-complexity-increase-code-clarity">Reduce Cyclomatic Complexity, Increase Code Clarity</h2>

<p>Cyclomatic complexity is one of the most valuable metrics in software engineering. It has important implications for code quality and maintainability, not to mention testing. High cyclomatic complexity might be both a signal of existing problems and a predictor of future ones. So, keeping the value of this metric under control is certainly something you want to do if you want to achieve a healthy codebase. Keeping it under control is exactly what you’ve learned with our post.</p>

<p>Before parting ways, a final caveat. Keep in mind that no metric is a panacea when used in isolation. Often, what you’d really want to do is to track and improve a <a href="https://linearb.io/5-key-metrics-fix-your-software-teams-quality/">group of metrics</a> that, together, can give you the big picture view of the health of your team and project. Thanks for reading.</p>

    
    
      
    
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
                    
            <a rel="previous" class="previous" href="/en/mutation-testing/">&larr; Mutation Testing: What It Is and How It Makes Code Coverage Matter </a>
        
        
                
         
        
        
                
        
        
                
      
    <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//carlosschultsblog.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">         
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/carlosschults"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">carlosschults</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/carlosschults"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">carlosschults</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Articles on software development and technology.</p>
      </div>
    </div>

  </div>

</footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92788641-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
